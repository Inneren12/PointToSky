# `const_v1.bin` Binary Format

This document describes the layout generated by `catalog-packer const` and
consumed by `BinaryConstellationBoundaries`.

## Header (little-endian)

| Offset | Size | Type | Description |
| ------ | ---- | ---- | ----------- |
| 0 | 8 | `char[8]` | Magic string `"PTSKCONS"` |
| 8 | 2 | `u16` | Version (currently `1`) |
| 10 | 2 | `u16` | Reserved (zero) |
| 12 | 2 | `u16` | Constellation count (`88`) |
| 14 | 4 | `u32` | Polygon count |
| 18 | 4 | `u32` | Vertex count |
| 22 | 4 | `u32` | CRC32 of all bytes after the header |

## Constellation directory (88 entries)

Each entry is 28 bytes:

- `char iauCode[3]` + zero terminator — IAU constellation code.
- `u32 polyStart` — index of the first polygon belonging to the constellation.
- `u32 polyCount` — number of polygons for the constellation.
- `float raMin`, `raMax`, `decMin`, `decMax` — axis-aligned bounding box in
  equatorial degrees. If a constellation crosses the RA 0/360 meridian the
  values are stored with `raMin > raMax`; the runtime interprets this as a
  wrapped interval covering `[raMin; 360] ∪ [0; raMax]`.

## Polygon table

For each polygon (24 bytes per entry):

- `u32 vertexStart`, `u32 vertexCount` — span inside the vertex buffer.
- `float raMin`, `raMax`, `decMin`, `decMax` — per-polygon bounding box using
  the same wrap convention as the directory.

## Vertex buffer

A tightly packed sequence of `vertexCount` entries, each containing two
little-endian floats `(raDeg, decDeg)`.

- Right ascension is normalised to the `[0; 360]` range.
- Declination is stored in degrees `[-90; +90]`.
- Polygons are closed (the last vertex repeats the first one).
- Segments crossing the RA=0/360 meridian are “stitched” by duplicating
  vertices on both sides of the seam so ray casting can operate on a continuous
  curve.

## CRC

`CRC32` uses the standard IEEE polynomial and covers every byte after the
header (i.e. the constellation directory, polygons and vertices).
